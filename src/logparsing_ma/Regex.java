/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package logparsing_ma;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 *
 * @author Laura
 */
class Regex {
//    TIME_STAMP)(Version 7)(LowerTerm 20150214)(IncludeLower true)(UpperTerm 20150317)(IncludeUpper false)]])(infoSerializationCode 0)])(Header null)(Formats null)(Index null)(ProcessDate null)(HierarchicalGroupFields false)(GroupFields [PROG_ID, TIME_STAMP_DAY])(ValueFields [PPL_COUNT_APPROVED + SUBA_PPL_COUNT_APPROVED + PPL_COUNT_CONFIRMED + SUBA_PPL_COUNT_CONFIRMED + PPL_COUNT_OPEN + SUBA_PPL_COUNT_OPEN + PPL_COUNT_REJECTED + SUBA_PPL_COUNT_REJECTED + PPS_COUNT_APPROVED + SUBA_PPS_COUNT_APPROVED + PPS_COUNT_CONFIRMED  + SUBA_PPS_COUNT_CONFIRMED + PPS_COUNT_OPEN + SUBA_PPS_COUNT_OPEN + PPS_COUNT_REJECTED + SUBA_PPS_COUNT_REJECTED, PPL_COUNT_APPROVED + SUBA_PPL_COUNT_APPROVED + PPL_COUNT_CONFIRMED + SUBA_PPL_COUNT_CONFIRMED + PPL_COUNT_OPEN + SUBA_PPL_COUNT_OPEN + PPL_COUNT_REJECTED + SUBA_PPL_COUNT_REJECTED, PPS_COUNT_APPROVED + SUBA_PPS_COUNT_APPROVED + PPS_COUNT_CONFIRMED  + SUBA_PPS_COUNT_CONFIRMED + PPS_COUNT_OPEN + SUBA_PPS_COUNT_OPEN + PPS_COUNT_REJECTED + SUBA_PPS_COUNT_REJECTED, PPV_COUNT + SUBA_PPV_COUNT, PPC_COUNT + SUBA_PPC_COUNT, TPV_COUNT + SUBA_TPV_COUNT])(DistinctFields [])(ZeroGroupFields [])(Sort [WSort (Version 7)(TIME_STAMP_DAY DESC)])(Page [WPage (Version 7)(Start 0)(Size 50000)])(OutputFormat null)]";
//    static String   REGEX_1 = "(.+) INFO .+ PROG_ID\\)\\(Version 7\\)\\(Values [(\\d+)] .+ TIME_STAMP\\)\\(Version 7\\)\\(LowerTerm(\\d+)\\)\\(IncludeLower true\\)\\(UpperTerm (\\d+).*";
//    static String[]   REGEXS = new String[] {"(.+) INFO .+ PROG_ID\\)\\(Version 7\\)\\(Values \\[(\\d+)\\].+TIME_STAMP\\)\\(Version 7\\)\\(LowerTerm (\\d+)\\)\\(IncludeLower true\\)\\(UpperTerm (\\d+).*\\(GroupFields \\[(.+)\\]\\).*\\(ValueFields \\[(.+).*\\(Sort \\[WSort \\(Version 7\\)\\((.+)\\S([DESC|ASC])\\)\\]\\)\\(.*"};
    static String[]   REGEXS = new String[] {"\"CUBE\",\"(\\d{4}-\\d{2}-\\d{2} \\d\\d:\\d\\d:\\d\\d,\\d\\d\\d).+\\[time\\].\\[Day Name\\].&\\[(\\d.+)\\] : \\[time\\].\\[Day Name\\].&\\[(\\d.+)\\]\",\"(\\d+).+\\[Measures\\].(.+).*"};//.\\[User Name\\].&\\[(.\\d+)\\].*"};
                                            //    "CUBE,\"2015-07-24 08:26:19,010\",,,\"[time].[Day Name].&[20150701] : [time].[Day Name].&[20150724]\",\"1556461\",\"L-JBOSS-61\",\"2015-07-24 08:26:19,010 
//    DEBUG [overviewReportService-thread-2][] [com.zanox.prm.publisher.statistics.query.overview.application.controller.PublisherStatsQueryBuilder]  WITH MEMBER [Measures].[Lead Commission Confirmed Orig] AS  (   
//    [transaction status].[transaction status].[Transaction Status Name].&[1],    [Measures].[Lead Commission Program Currency] ) MEMBER [Measures].[Lead Commission Open Orig] AS     [transaction status].[transaction status].[Transaction Status Name].&[0], MEMBER [Measures].[Lead Commission Approved Orig] AS     [transaction status].[transaction status].[Transaction Status Name].&[3], MEMBER [Measures].[Lead Commission Rejected Orig] AS     [transaction status].[transaction status].[Transaction Status Name].&[2], MEMBER [Measures].[Lead Commission Open and Confirmed Orig] AS     [transaction status].[transaction status].[Transaction Status Type].&[valid], MEMBER [Measures].[Sale Commission Confirmed Orig] AS     [Measures].[Sale Commission Program Currency] MEMBER [Measures].[Sale Commission Open Orig] AS  MEMBER [Measures].[Sale Commission Approved Orig] AS  MEMBER [Measures].[Sale Commission Rejected Orig] AS  MEMBER [Measures].[Sale Commission Open and Confirmed Orig] AS  MEMBER [Measures].[Lead Commission Open and Confirmed] AS     [Measures].[Lead Commission] MEMBER [Measures].[Sale Commission Open and Confirmed] AS     [Measures].[Sale Commission] MEMBER [Measures].[Lead Number Open and Confirmed] AS     [Measures].[Lead Number] MEMBER [Measures].[Sale Number Open and Confirmed] AS     [Measures].[Sale Number] MEMBER [Measures].[Transaction Number Open] AS     [Measures].[Sale Number Open] +    [Measures].[Lead Number Open] MEMBER [Measures].[Transaction Number Approved] AS     [Measures].[Sale Number Approved] +    [Measures].[Lead Number Approved] MEMBER [Measures].[Transaction Number Open and Confirmed] AS     [Measures].[Sale Number Open and Confirmed] +    [Measures].[Lead Number Open and Confirmed] MEMBER [Measures].[Transaction Number Confirmed] AS     [Measures].[Sale Number Confirmed] +    [Measures].[Lead Number Confirmed] MEMBER [Measures].[Transaction Number Rejected] AS     [Measures].[Sale Number Rejected] +    [Measures].[Lead Number Rejected] MEMBER [Measures].[Transaction Commission Open] AS     [Measures].[Sale Commission Open] +    [Measures].[Lead Commission Open] MEMBER [Measures].[Transaction Commission Approved] AS     [Measures].[Sale Commission Approved] +    [Measures].[Lead Commission Approved] MEMBER [Measures].[Transaction Commission Open and Confirmed] AS     [Measures].[Sale Commission Open and Confirmed] +    [Measures].[Lead Commission Open and Confirmed] MEMBER [Measures].[Transaction Commission Confirmed] AS     [Measures].[Sale Commission Confirmed] +    [Measures].[Lead Commission Confirmed] MEMBER [Measures].[Transaction Commission Rejected] AS     [Measures].[Sale Commission Rejected] +    [Measures].[Lead Commission Rejected] MEMBER [Measures].[Transaction Commission Open Orig] AS     [Measures].[Sale Commission Open Orig] +    [Measures].[Lead Commission Open Orig] MEMBER [Measures].[Transaction Commission Approved Orig] AS     [Measures].[Sale Commission Approved Orig] +    [Measures].[Lead Commission Approved Orig] MEMBER [Measures].[Transaction Commission Open and Confirmed Orig] AS     [Measures].[Sale Commission Open and Confirmed Orig] +    [Measures].[Lead Commission Open and Confirmed Orig] MEMBER [Measures].[Transaction Commission Confirmed Orig] AS     [Measures].[Sale Commission Confirmed Orig] +    [Measures].[Lead Commission Confirmed Orig] MEMBER [Measures].[Transaction Commission Rejected Orig] AS     [Measures].[Sale Commission Rejected Orig] +    [Measures].[Lead Commission Rejected Orig] MEMBER [Measures].[Commission Sum] AS     [Measures].[Lead Commission Open and Confirmed] +    [Measures].[Adv Click Commission] +    [Measures].[Adv View Commission] MEMBER [Measures].[Constant Member] AS     null SELECT { [Measures].[View Number], [Measures].[View Number TPV], [Measures].[Sale Number], [Measures].[Lead Number], [Measures].[Sale Number Confirmed], [Measures].[Lead Number Confirmed], [Measures].[Sale Number Rejected], [Measures].[Lead Number Rejected], [Measures].[Click Number], [Measures].[Commission Sum], [Measures].[View Number], [Measures].[Click Number], [Measures].[Adv Click Commission], [Measures].[Constant Member], [Measures].[Constant Member], [Measures].[Transaction Number Rejected], [Measures].[Transaction Commission Rejected], [Measures].[Transaction Number Open and Confirmed], [Measures].[Transaction Commission Open and Confirmed]} ON COLUMNS,  NON EMPTY { {[time].[Day Name].&[20150701] : [time].[Day Name].&[20150724]} } ON ROWS   FROM [zx_statistic_cube]  WHERE (  [partner].[User Name].&[1556461],  {} ) \",\"[Measures].[View Number]\",\"[Measures].[View Number TPV]\",\"[Measures].[Sale Number]\",\"[Measures].[Lead Number]\",\"[Measures].[Sale Number Confirmed]\",\"[Measures].[Lead Number Confirmed]\",\"[Measures].[Sale Number Rejected]\",\"[Measures].[Lead Number Rejected]\",\"[Measures].[Click Number]\",\"[Measures].[Commission Sum]\",\"[Measures].[View Number]\",\"[Measures].[Click Number]\",\"[Measures].[Adv Click Commission]\",\"[Measures].[Constant Member]\",\"[Measures].[Constant Member]\",\"[Measures].[Transaction Number Rejected]\",\"[Measures].[Transaction Commission Rejected]\",\"[Measures].[Transaction Number Open and Confirmed]\",\"[Measures].[Transaction Commission Open and Confirmed]\"";
    
    static Pattern[] PATTERNS = new Pattern[REGEXS.length];
    static {
        for (int i = 0; i < REGEXS.length; i++){
            PATTERNS[i] = Pattern.compile(REGEXS[i]);
        }
    }
    static String   INPUT_STRING = "\"CUBE\",\"2015-07-25 01:58:54,034\",,,\"[time].[Day Name].&[20150701] : [time].[Day Name].&[20150725]\",\"2148375\",\"L-JBOSS-60\",\"2015-07-25 01:58:54,034 DEBUG [overviewReportService-thread-20][] [com.zanox.prm.publisher.statistics.query.overview.application.controller.PublisherStatsQueryBuilder]  WITH MEMBER [Measures].[Lead Commission Confirmed Orig] AS  (    [transaction status].[transaction status].[Transaction Status Name].&[1],    [Measures].[Lead Commission Program Currency] ) MEMBER [Measures].[Lead Commission Open Orig] AS     [transaction status].[transaction status].[Transaction Status Name].&[0], MEMBER [Measures].[Lead Commission Approved Orig] AS     [transaction status].[transaction status].[Transaction Status Name].&[3], MEMBER [Measures].[Lead Commission Rejected Orig] AS     [transaction status].[transaction status].[Transaction Status Name].&[2], MEMBER [Measures].[Lead Commission Open and Confirmed Orig] AS     [transaction status].[transaction status].[Transaction Status Type].&[valid], MEMBER [Measures].[Sale Commission Confirmed Orig] AS     [Measures].[Sale Commission Program Currency] MEMBER [Measures].[Sale Commission Open Orig] AS  MEMBER [Measures].[Sale Commission Approved Orig] AS  MEMBER [Measures].[Sale Commission Rejected Orig] AS  MEMBER [Measures].[Sale Commission Open and Confirmed Orig] AS  MEMBER [Measures].[Lead Commission Open and Confirmed] AS     [Measures].[Lead Commission] MEMBER [Measures].[Sale Commission Open and Confirmed] AS     [Measures].[Sale Commission] MEMBER [Measures].[Lead Number Open and Confirmed] AS     [Measures].[Lead Number] MEMBER [Measures].[Sale Number Open and Confirmed] AS     [Measures].[Sale Number] MEMBER [Measures].[Transaction Number Open] AS     [Measures].[Sale Number Open] +    [Measures].[Lead Number Open] MEMBER [Measures].[Transaction Number Approved] AS     [Measures].[Sale Number Approved] +    [Measures].[Lead Number Approved] MEMBER [Measures].[Transaction Number Open and Confirmed] AS     [Measures].[Sale Number Open and Confirmed] +    [Measures].[Lead Number Open and Confirmed] MEMBER [Measures].[Transaction Number Confirmed] AS     [Measures].[Sale Number Confirmed] +    [Measures].[Lead Number Confirmed] MEMBER [Measures].[Transaction Number Rejected] AS     [Measures].[Sale Number Rejected] +    [Measures].[Lead Number Rejected] MEMBER [Measures].[Transaction Commission Open] AS     [Measures].[Sale Commission Open] +    [Measures].[Lead Commission Open] MEMBER [Measures].[Transaction Commission Approved] AS     [Measures].[Sale Commission Approved] +    [Measures].[Lead Commission Approved] MEMBER [Measures].[Transaction Commission Open and Confirmed] AS     [Measures].[Sale Commission Open and Confirmed] +    [Measures].[Lead Commission Open and Confirmed] MEMBER [Measures].[Transaction Commission Confirmed] AS     [Measures].[Sale Commission Confirmed] +    [Measures].[Lead Commission Confirmed] MEMBER [Measures].[Transaction Commission Rejected] AS     [Measures].[Sale Commission Rejected] +    [Measures].[Lead Commission Rejected] MEMBER [Measures].[Transaction Commission Open Orig] AS     [Measures].[Sale Commission Open Orig] +    [Measures].[Lead Commission Open Orig] MEMBER [Measures].[Transaction Commission Approved Orig] AS     [Measures].[Sale Commission Approved Orig] +    [Measures].[Lead Commission Approved Orig] MEMBER [Measures].[Transaction Commission Open and Confirmed Orig] AS     [Measures].[Sale Commission Open and Confirmed Orig] +    [Measures].[Lead Commission Open and Confirmed Orig] MEMBER [Measures].[Transaction Commission Confirmed Orig] AS     [Measures].[Sale Commission Confirmed Orig] +    [Measures].[Lead Commission Confirmed Orig] MEMBER [Measures].[Transaction Commission Rejected Orig] AS     [Measures].[Sale Commission Rejected Orig] +    [Measures].[Lead Commission Rejected Orig] MEMBER [Measures].[Commission Sum] AS     [Measures].[Lead Commission Open and Confirmed] +    [Measures].[Adv Click Commission] +    [Measures].[Adv View Commission] MEMBER [Measures].[Constant Member] AS     null SELECT { [Measures].[View Number], [Measures].[View Number TPV], [Measures].[Sale Number], [Measures].[Lead Number], [Measures].[Sale Number Confirmed], [Measures].[Lead Number Confirmed], [Measures].[Sale Number Rejected], [Measures].[Lead Number Rejected], [Measures].[Click Number], [Measures].[Commission Sum], [Measures].[Click Number], [Measures].[Constant Member], [Measures].[Adv Click Commission], [Measures].[View Number], [Measures].[Transaction Number Rejected], [Measures].[Transaction Commission Rejected], [Measures].[Transaction Number Open and Confirmed], [Measures].[Transaction Commission Open and Confirmed]} ON COLUMNS,  NON EMPTY { {[time].[Day Name].&[20150701] : [time].[Day Name].&[20150725]} } ON ROWS   FROM [zx_statistic_cube]  WHERE (  [partner].[User Name].&[2148375],  {} ) \",\"[Measures].[View Number]\",\"[Measures].[View Number TPV]\",\"[Measures].[Sale Number]\",\"[Measures].[Lead Number]\",\"[Measures].[Sale Number Confirmed]\",\"[Measures].[Lead Number Confirmed]\",\"[Measures].[Sale Number Rejected]\",\"[Measures].[Lead Number Rejected]\",\"[Measures].[Click Number]\",\"[Measures].[Commission Sum]\",\"[Measures].[Click Number]\",\"[Measures].[Constant Member]\",\"[Measures].[Adv Click Commission]\",\"[Measures].[View Number]\",\"[Measures].[Transaction Number Rejected]\",\"[Measures].[Transaction Commission Rejected]\",\"[Measures].[Transaction Number Open and Confirmed]\",\"[Measures].[Transaction Commission Open and Confirmed]\"";
    
    public static void main(String[] args){
        for (Pattern pattern : PATTERNS) {

            Matcher matcher = pattern.matcher(INPUT_STRING);
            if (matcher.matches()){

        
       // Wenn pattern nicht gefunden, dann sysoutprtln (um neues regex zu bauen)
                System.out.println(matcher.group(1));
                System.out.println(matcher.group(2));
//                System.out.println(matcher.group(3));
//                System.out.println(matcher.group(4));
//                System.out.println(matcher.group(5));
//                System.out.println(matcher.group(6));
//                System.out.println(matcher.group(8));
            }
            else{
//                System.out.println(INPUT_STRING);
            }
        }
    }
}
